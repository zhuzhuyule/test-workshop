# 单元测试
## 测试分类
### 按覆盖范围
#### 单元测试
#####  每个组件是否的正常运行，防止后续修改影响之前的组件
#### 集成测试
#####  多个组件或某种业务等涉及多组件的测试
### 按内容划分
#### 功能测试
#### 性能测试
#### 兼容测试
### 其它划分
#### 冒烟测试
#### 回归测试
#### 验收测试
#### 安全测试
#### 易用性测试
#### 国际化测试
#### 静态测试
#### 动态测试
## 为什么写单元测试
### 好处
#### 防止回归
#### 验证我们代码正确性
#### 程序最好的说明文档
#### 尽早的发现程序bug
#### 减少耦合代码
#### 更容易修改代码
#### 更好的帮助你理解你的设计
#### 写测试是有趣的
### 劣势
#### 你需要更多的时间去完成一件事
#### > 简单代码会多花费20%左右的时间
#### > 复杂的代码会花费更多时间

#### 难以应对变化的设计或者需求
## 有哪些框架
> https://raygun.com/blog/mocha-vs-jasmine-chai-sinon-cucumber/
> https://www.tisa-software.com/what-s-up/blog/217-jasmine-mocha-javascript-testing-framework-comparison
> https://blog.bitsrc.io/angular-9-testing-a-comparison-between-jasmine-jest-and-mocha-acc57bcab836

### Jasmine
#### 2008
#### 开箱即用
#### 内置断言，spy/stub/mock/fake
#### Angular内置集成，支持更好
#### 需要所有测试文件都已 spec 结尾
#### x效率有待提升
#### x错我提示不是很友好
### Mocha
#### 2011
#### 用的人最多，社区最成熟，
#### 灵活，可配置性强易拓展
#####  Assert
#####  Chain
> https://www.chaijs.com/

#####  Sinon
> https://sinonjs.org/

#### 异步支持测试支持很好
#### x可以使用快照测试，但依然需要额外配置
#### x需要花费一些时间去找文档和插件
### Jest
#### 基于Jasmine封装
#### 0配置，开箱即用
#### 性能较快
##### enzyme
###### shallow
> constructor
> componentWillReceiveProps
> shouldComponentUpdate
> componentWillUpdate
> render

####### 浅渲染(只渲染根级，不渲染子集)
###### render

####### 静态渲染
###### mount
> constructor
> componentWillReceiveProps
> shouldComponentUpdate
> componentWillUpdate
> render
> componentDidUpdate

####### 完整DOM渲染。拥有DOM API交互能力
#####  异步并行测试
#### 支持快照
#### Facebook 家的，React支持很好
#### 文档非常友好
#### 自带代码覆盖率
#### 自带Mock方法
#### x并不支持不同浏览器环境的测试
## 注意事项
### 测试覆盖率
> 并不是越高越好，超过一定阈值，想要测试一些边缘事例，需要花费巨大的工作量，但是价值并不大

### 测试命名
#### 明确地表达了测试的意图
### 常量语义化、减少无意义数字
### 避免多个断言
#### 每个测试只包含一个 Assert
> 如果一个 Assert 失败，将不计算后续 Assert。
> 确保在测试中没有断言多个事例
> 从整体上了解测试失败原因

### 尽量减少私有方法测试
#### 我们关心的是调用到私有方法的公共方法的最终结果
### Mock可变量
> 比如 Date, Time

## Angular中的应用
